var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
const GameLaunch_1 = require("./GameLaunch");
/*
* 游戏初始化配置;
*/
class GameConfig {
    constructor() { }
    static init() {
        var reg = Laya.ClassUtils.regClass;
        reg("GameLaunch.ts", GameLaunch_1.default);
    }
}
GameConfig.width = 640;
GameConfig.height = 1136;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "GameMain.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;
exports.default = GameConfig;
GameConfig.init();

},{"./GameLaunch":2}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Manager_1 = require("./script/manager/Manager");
class GameLaunch extends Laya.Script {
    constructor() {
        super();
        this._showLog = true;
        this._managerList = [];
    }
    onEnable() {
    }
    onAwake() {
        this._managerList.push(new Manager_1.default());
    }
    onDisable() {
        for (let i = 0; i < this._managerList.length; ++i) {
            this._managerList[i].onDestroy();
        }
        this._managerList = [];
    }
    showLog() {
        if (!this._showLog) {
            console.log = () => { };
            console.error = () => { };
        }
    }
}
exports.default = GameLaunch;

},{"./script/manager/Manager":4}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const GameConfig_1 = require("./GameConfig");
class Main {
    constructor() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    onVersionLoaded() {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    }
    onConfigLoaded() {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    }
}
//激活启动类
new Main();

},{"./GameConfig":1}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ModuleManager_1 = require("./modulemanager/ModuleManager");
const SoundManager_1 = require("./soundmanager/SoundManager");
const UIManager_1 = require("./uimanager/UIManager");
const ResManager_1 = require("./resmanager/ResManager");
const AssetsManager_1 = require("./resmanager/AssetsManager");
class Manager {
    constructor() {
        // Manager.Module;
        // Manager.UI;
        // Manager.Assets;
        // Manager.Sound;
        // Manager.Res;
    }
    static get Assets() {
        if (!this._assetsManager) {
            this._assetsManager = new AssetsManager_1.default();
        }
        return this._assetsManager;
    }
    static get Module() {
        if (!this._moduleManager) {
            this._moduleManager = new ModuleManager_1.default();
        }
        return this._moduleManager;
    }
    static get Sound() {
        if (!this._soundManager) {
            this._soundManager = new SoundManager_1.default();
        }
        return this._soundManager;
    }
    static get UI() {
        if (!this._uiManager) {
            this._uiManager = new UIManager_1.default();
        }
        return this._uiManager;
    }
    static get Res() {
        if (!this._resManager) {
            this._resManager = new ResManager_1.default();
        }
        return this._resManager;
    }
}
/** 资源加载管理 */
Manager._assetsManager = null;
/** 玩法模块加载管理 */
Manager._moduleManager = null;
/** 音频加载管理 */
Manager._soundManager = null;
/** UI管理 */
Manager._uiManager = null;
/** 资源获取管理 */
Manager._resManager = null;
exports.default = Manager;

},{"./modulemanager/ModuleManager":6,"./resmanager/AssetsManager":7,"./resmanager/ResManager":8,"./soundmanager/SoundManager":9,"./uimanager/UIManager":10}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BaseManager {
}
exports.default = BaseManager;

},{}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BaseManager_1 = require("../base/BaseManager");
class ModuleManager extends BaseManager_1.default {
    constructor() {
        super();
        this.moduleTable = [];
        this.moduleTable = this.initModule();
    }
    initModule() {
        return [
        // SceneCtrl.getInstance(),
        // MainUICtrl.getInstance(),
        ];
    }
    onDestroy() {
        for (let i in this.moduleTable) {
            let m = this.moduleTable[i];
            m.offTarget && m.offTarget(m);
        }
        this.moduleTable = [];
    }
}
exports.default = ModuleManager;

},{"../base/BaseManager":5}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BaseManager_1 = require("../base/BaseManager");
class AssetsManager extends BaseManager_1.default {
    constructor() {
        super(...arguments);
        this._assetsList = {};
    }
    /** 加载预制体 */
    // loadPrefab(path: string): Promise<any> {
    //     return this.loadAssetsAsync(path);
    // }
    // /** 加载帧图片 */
    // loadSprite(path: string): Promise<cc.SpriteFrame> {
    //     return this.loadAssetsAsync(path, cc.SpriteFrame);
    // }
    // /** 加载图集 */
    // loadSpriteAtlas(path: string): Promise<cc.SpriteAtlas> {
    //     return this.loadAssetsAsync(path, cc.SpriteAtlas);
    // }
    // /** 加载音频 */
    // loadAudioClip(path: string): Promise<cc.AudioClip>{
    //     return this.loadAssetsAsync(path, cc.AudioClip);
    // }
    // /** 加载配置 */
    // loadConfig(path: string): Promise<cc.JsonAsset>{
    //     return this.loadAssetsAsync(path, cc.JsonAsset);
    // }
    // loadAssetsAsync(path: string, type?: any): Promise<any> {
    //     return new Promise((resolve: Function, reject: Function) => {
    //         let _self = this;
    //         if(_self._assetsList[path]){
    //             resolve(_self._assetsList[path]);
    //         }else{
    //             Laya.loader.load(path, Laya.Handler.create(this, (err, res) => {
    //                 console.log('资源加载---->', err, res);
    //                 if(err){
    //                     reject();
    //                     return;
    //                 }
    //                 _self._assetsList[path] = res;
    //                 resolve(res);
    //             }));
    //         }
    //     });
    // }
    releaseRes(resPath) {
        // cc.loader.releaseRes(resPath);
        this._assetsList[resPath] = null;
    }
    onDestroy() {
        // for(let path in this._assetsList){
        //     this.releaseRes(path);
        // }
        // this._assetsList = {};
    }
}
exports.default = AssetsManager;

},{"../base/BaseManager":5}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BaseManager_1 = require("../base/BaseManager");
const Manager_1 = require("../Manager");
class ResManager extends BaseManager_1.default {
    constructor() {
        //------------------------------------------------------------
        /** 获取预制体, 并生成实例 */
        // getPrefab(path: string): Promise<Laya.Sprite> {
        //     return this._getPrefab(path);
        // }
        super(...arguments);
        // /** 获取音频 */
        // getAudio(path: string): Promise<cc.AudioClip> {
        //     return this._getAudio(path);
        // }
        // /** 获取resources/textures/draw/目录下的资源 */
        // getDraw(name: string): Promise<cc.SpriteFrame> {
        //     let path = "textures/draw/";
        //     let atlasName = "0-draw"; //没有图集则为空
        //     return this._getSprite(path, name, atlasName);
        // }
        // /** 获取配置 */
        // getMonsterConfig(name: string): Promise<cc.JsonAsset> {
        //     let path = "config/auto/";
        //     return this._getConfig(path + name);
        // }
        // //------------------------------------------------------------
        this._assetMgr = Manager_1.default.Assets;
    }
    // /** 获取图片散图资源，如果获取失败，则从图集里获取 */
    // private _getSprite(path: string, name: string, atlasName?: string): Promise<cc.SpriteFrame> {
    //     return new Promise((resolve, reject) => {
    //         /** 获取散图 */
    //         this._assetMgr.loadSprite(path + name).then((spFrame: cc.SpriteFrame) => {
    //             resolve(spFrame);
    //         }).catch(() => {
    //             /** 没散图则从图集获取 */
    //             this._getSpriteFrameFromAtlas(path + atlasName, name).then((spFrame: cc.SpriteFrame) => {
    //                 resolve(spFrame);
    //             }).catch(() => {
    //                 console.error("[ResManager.ts]----->asset is not exist:", path + name, "--->atlas are not:", atlasName);
    //                 // this._assetMgr.releaseRes(path + atlasName);
    //                 reject();
    //             });
    //         });
    //     });   
    // }
    // private _getSpriteFrameFromAtlas(path: string, name: string): Promise<cc.SpriteFrame> {
    //     return new Promise((resolve, reject) => {
    //         this._assetMgr.loadSpriteAtlas(path).then((res: cc.SpriteAtlas) => {
    //             let spFrame = res.getSpriteFrame(name);
    //             if(spFrame){
    //                 resolve(spFrame);
    //             }else{
    //                 reject();
    //             }
    //         }).catch(() => {
    //             reject();
    //         });
    //     });
    // }
    /** 获取预制体 */
    // private _getPrefab(path: string): Promise<Laya.Sprite> {
    //     return new Promise((resolve, reject) => {
    //         this._assetMgr.loadPrefab(path).then((res) => {
    //             if(res){
    //                 resolve(res);
    //             }else{
    //                 reject();
    //             }
    //         }).catch(() => {
    //             reject();
    //         });
    //     });
    // }
    // private _getConfig(path: string): Promise<cc.JsonAsset> {
    //     return new Promise((resolve, reject) => {
    //         this._assetMgr.loadConfig(path).then((res) => {
    //             if(res){
    //                 resolve(res.json);
    //             }else{
    //                 reject();
    //             }
    //         }).catch(() => {
    //             reject();
    //         });
    //     });
    // }
    // private _getAudio(path: string): Promise<cc.AudioClip> {
    //     return new Promise((resolve, reject) => {
    //         this._assetMgr.loadAudioClip(path).then((audio: cc.AudioClip) => {
    //             if(audio){
    //                 resolve(audio);
    //             }else{
    //                 reject();
    //             }
    //         }).catch(() => {
    //             reject();
    //         });
    //     });
    // }
    onDestroy() {
    }
}
exports.default = ResManager;

},{"../Manager":4,"../base/BaseManager":5}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BaseManager_1 = require("../base/BaseManager");
class SoundManager extends BaseManager_1.default {
    constructor() {
        super(...arguments);
        this._current = 0;
        this._loadList = {};
    }
    // play(path: string, loop: boolean = false, volume: number = 1){
    //     Manager.Res.getAudio(path).then((audio: cc.AudioClip) => {
    //         this._current = cc.audioEngine.play(audio, loop, volume);
    //         this._loadList[path] = audio;
    //     });
    // }
    // pauseCurrent(){
    //     cc.audioEngine.pause(this._current);
    // }
    // pauseAll(){
    //     cc.audioEngine.pauseAll();
    // }
    // stopCurrent(){
    //     cc.audioEngine.stop(this._current);
    // }
    // stopAll(){
    //     cc.audioEngine.stopAll();
    // }
    // resumeCurrent(){
    //     cc.audioEngine.resume(this._current);
    // }
    // resumeAll(){
    //     cc.audioEngine.resumeAll();
    // }
    onDestroy() {
        this._loadList = {};
    }
}
exports.default = SoundManager;

},{"../base/BaseManager":5}],10:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BaseManager_1 = require("../base/BaseManager");
let w = 960;
let h = 640;
class viewElement {
}
class UIManager extends BaseManager_1.default {
    constructor() {
        super();
        this._views = {};
        this._root = new Laya.Sprite();
        Laya.stage.addChild(this._root);
        this._root.width = w;
        this._root.height = h;
        this._root.x = 0;
        this._root.y = 0;
    }
    // open(resPath: string, zIndex: number, openEffect: number): Promise<MVCS.View>{
    //     return new Promise((resolve) => {
    //         let view = this._views[resPath];
    //         if(!view){
    //             view = new viewElement();
    //         }
    //         let openSuc = (viewNode: Laya.Sprite) => {
    //             viewNode.zOrder = zIndex;
    //             this._root.addChild(viewNode);
    //         }
    //         if(!view.instance){
    //             this._createView(resPath).then((viewObj: MVCS.View) => {
    //                 openSuc(viewObj.owner.getComponent(Laya.Sprite));
    //                 resolve(viewObj);
    //             });
    //         }else{
    //             view.instance.owner.active = true;
    //             openSuc(view.instance.owner.getComponent(Laya.Sprite));
    //             resolve(view.instance);
    //         }
    //     });
    // }
    // getView<T>(resPath: string): Promise<T>{
    //     return new Promise((resolve) => {
    //         let view: any = this._views[resPath];
    //         if(!view){
    //             this._createView(resPath).then((view: any) => {
    //                 resolve(view.instance);
    //             });
    //         }else{
    //             resolve(view.instance);
    //         }
    //     });
    // }
    close(resPath, isDelete = false) {
        let view = this._views[resPath];
        if (view && view.instance) {
            if (isDelete) {
                view.instance.owner.destroy();
                this._views[resPath] = null;
            }
            else {
                view.instance.owner.active = false;
            }
        }
    }
    // private _createView(resPath: string): Promise<MVCS.View> {
    //     return new Promise((resolve) => {
    //         let view = this._views[resPath];
    //         if(!view){
    //             view = new viewElement();
    //             Manager.Res.getPrefab(resPath).then((viewObj: Laya.Sprite) => {
    //                 let names = resPath.split("/");
    //                 this._root.addChild(viewObj);
    //                 view.instance = viewObj.getComponent(names[names.length - 1]);
    //                 this._views[resPath] = view;
    //                 resolve(view.instance);
    //             });
    //         }else{
    //             resolve(view.instance);
    //         }
    //     });
    // }
    onDestroy() {
        this._views = {};
    }
}
exports.default = UIManager;

},{"../base/BaseManager":5}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3ByaXZhdGUvdmFyL2ZvbGRlcnMvdzQvZDIxbm03dG4xX3NjMndwMTV5Zno2ODdtMDAwMGduL1QvQXBwVHJhbnNsb2NhdGlvbi8yOEQ5Qjk3RS03NjhGLTQ0MTMtQUU3My0xNDkxMkVGRERGNTgvZC9MYXlhQWlySURFX2JldGEuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL0dhbWVMYXVuY2gudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvbWFuYWdlci9NYW5hZ2VyLnRzIiwic3JjL3NjcmlwdC9tYW5hZ2VyL2Jhc2UvQmFzZU1hbmFnZXIudHMiLCJzcmMvc2NyaXB0L21hbmFnZXIvbW9kdWxlbWFuYWdlci9Nb2R1bGVNYW5hZ2VyLnRzIiwic3JjL3NjcmlwdC9tYW5hZ2VyL3Jlc21hbmFnZXIvQXNzZXRzTWFuYWdlci50cyIsInNyYy9zY3JpcHQvbWFuYWdlci9yZXNtYW5hZ2VyL1Jlc01hbmFnZXIudHMiLCJzcmMvc2NyaXB0L21hbmFnZXIvc291bmRtYW5hZ2VyL1NvdW5kTWFuYWdlci50cyIsInNyYy9zY3JpcHQvbWFuYWdlci91aW1hbmFnZXIvVUlNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBLGdHQUFnRztBQUNoRyw2Q0FBcUM7QUFDckM7O0VBRUU7QUFDRjtJQWFJLGdCQUFjLENBQUM7SUFDZixNQUFNLENBQUMsSUFBSTtRQUNQLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO1FBQzdDLEdBQUcsQ0FBQyxlQUFlLEVBQUMsb0JBQVUsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7O0FBaEJNLGdCQUFLLEdBQVEsR0FBRyxDQUFDO0FBQ2pCLGlC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cUJBQXFCO0lBQ3JCLDhEQUE4RDtJQUM5RCwwQ0FBMEM7SUFDMUMsa0JBQWtCO0lBQ2xCLGlCQUFpQjtJQUNqQixzQ0FBc0M7SUFDdEMsWUFBWTtJQUNaLFVBQVU7SUFDVixJQUFJO0lBRUosS0FBSyxDQUFDLE9BQWUsRUFBRSxXQUFvQixLQUFLO1FBQzVDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDaEMsSUFBRyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBQztZQUNyQixJQUFHLFFBQVEsRUFBQztnQkFDUixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7YUFDL0I7aUJBQUk7Z0JBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQzthQUN0QztTQUNKO0lBQ0wsQ0FBQztJQUVELDZEQUE2RDtJQUM3RCx3Q0FBd0M7SUFDeEMsMkNBQTJDO0lBQzNDLHFCQUFxQjtJQUNyQix3Q0FBd0M7SUFDeEMsOEVBQThFO0lBQzlFLGtEQUFrRDtJQUNsRCxnREFBZ0Q7SUFDaEQsaUZBQWlGO0lBQ2pGLCtDQUErQztJQUMvQywwQ0FBMEM7SUFDMUMsa0JBQWtCO0lBQ2xCLGlCQUFpQjtJQUNqQixzQ0FBc0M7SUFDdEMsWUFBWTtJQUNaLFVBQVU7SUFDVixJQUFJO0lBRUosU0FBUztRQUNMLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7Q0FDSjtBQWxGRCw0QkFrRkMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBHYW1lTGF1bmNoIGZyb20gXCIuL0dhbWVMYXVuY2hcIlxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTEzNjtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWR3aWR0aFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwibm9uZVwiO1xyXG4gICAgc3RhdGljIGFsaWduVjpzdHJpbmc9XCJ0b3BcIjtcclxuICAgIHN0YXRpYyBhbGlnbkg6c3RyaW5nPVwibGVmdFwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwiR2FtZU1haW4uc2NlbmVcIjtcclxuICAgIHN0YXRpYyBzY2VuZVJvb3Q6c3RyaW5nPVwiXCI7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBzdGF0OmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG4gICAgICAgIHJlZyhcIkdhbWVMYXVuY2gudHNcIixHYW1lTGF1bmNoKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgTWFuYWdlciBmcm9tIFwiLi9zY3JpcHQvbWFuYWdlci9NYW5hZ2VyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lTGF1bmNoIGV4dGVuZHMgTGF5YS5TY3JpcHQge1xyXG4gICAgcHJpdmF0ZSBfc2hvd0xvZzogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9tYW5hZ2VyTGlzdCA9IFtdO1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIFxyXG4gICAgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpe1xyXG4gICAgICAgIHRoaXMuX21hbmFnZXJMaXN0LnB1c2gobmV3IE1hbmFnZXIoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25EaXNhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLl9tYW5hZ2VyTGlzdC5sZW5ndGg7ICsraSl7XHJcbiAgICAgICAgICAgIHRoaXMuX21hbmFnZXJMaXN0W2ldLm9uRGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9tYW5hZ2VyTGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dMb2coKXtcclxuICAgICAgICBpZighdGhpcy5fc2hvd0xvZyl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gKCkgPT4ge307XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IgPSAoKSA9PiB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XG5jbGFzcyBNYWluIHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XG5cblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xuXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xuXHR9XG5cblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcblx0fVxuXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xuXHR9XG59XG4vL+a/gOa0u+WQr+WKqOexu1xubmV3IE1haW4oKTtcbiIsImltcG9ydCBNb2R1bGVNYW5hZ2VyIGZyb20gXCIuL21vZHVsZW1hbmFnZXIvTW9kdWxlTWFuYWdlclwiO1xuaW1wb3J0IFNvdW5kTWFuYWdlciBmcm9tIFwiLi9zb3VuZG1hbmFnZXIvU291bmRNYW5hZ2VyXCI7XG5pbXBvcnQgVUlNYW5hZ2VyIGZyb20gXCIuL3VpbWFuYWdlci9VSU1hbmFnZXJcIjtcbmltcG9ydCBSZXNNYW5hZ2VyIGZyb20gXCIuL3Jlc21hbmFnZXIvUmVzTWFuYWdlclwiO1xuaW1wb3J0IEFzc2V0c01hbmFnZXIgZnJvbSBcIi4vcmVzbWFuYWdlci9Bc3NldHNNYW5hZ2VyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIC8vIE1hbmFnZXIuTW9kdWxlO1xuICAgICAgICAvLyBNYW5hZ2VyLlVJO1xuICAgICAgICAvLyBNYW5hZ2VyLkFzc2V0cztcbiAgICAgICAgLy8gTWFuYWdlci5Tb3VuZDtcbiAgICAgICAgLy8gTWFuYWdlci5SZXM7XG4gICAgfVxuICAgIC8qKiDotYTmupDliqDovb3nrqHnkIYgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBfYXNzZXRzTWFuYWdlcjogQXNzZXRzTWFuYWdlciA9IG51bGw7XG4gICAgcHVibGljIHN0YXRpYyBnZXQgQXNzZXRzKCl7XG4gICAgICAgIGlmKCF0aGlzLl9hc3NldHNNYW5hZ2VyKXtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2V0c01hbmFnZXIgPSBuZXcgQXNzZXRzTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hc3NldHNNYW5hZ2VyO1xuICAgIH1cblxuICAgIC8qKiDnjqnms5XmqKHlnZfliqDovb3nrqHnkIYgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBfbW9kdWxlTWFuYWdlcjogTW9kdWxlTWFuYWdlciA9IG51bGw7XG4gICAgcHVibGljIHN0YXRpYyBnZXQgTW9kdWxlKCl7XG4gICAgICAgIGlmKCF0aGlzLl9tb2R1bGVNYW5hZ2VyKXtcbiAgICAgICAgICAgIHRoaXMuX21vZHVsZU1hbmFnZXIgPSBuZXcgTW9kdWxlTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyO1xuICAgIH1cblxuICAgIC8qKiDpn7PpopHliqDovb3nrqHnkIYgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBfc291bmRNYW5hZ2VyOiBTb3VuZE1hbmFnZXIgPSBudWxsO1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IFNvdW5kKCl7XG4gICAgICAgIGlmKCF0aGlzLl9zb3VuZE1hbmFnZXIpe1xuICAgICAgICAgICAgdGhpcy5fc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zb3VuZE1hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqIFVJ566h55CGICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgX3VpTWFuYWdlcjogVUlNYW5hZ2VyID0gbnVsbDtcbiAgICBwdWJsaWMgc3RhdGljIGdldCBVSSgpe1xuICAgICAgICBpZighdGhpcy5fdWlNYW5hZ2VyKXtcbiAgICAgICAgICAgIHRoaXMuX3VpTWFuYWdlciA9IG5ldyBVSU1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdWlNYW5hZ2VyO1xuICAgIH1cblxuICAgIC8qKiDotYTmupDojrflj5bnrqHnkIYgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBfcmVzTWFuYWdlcjogUmVzTWFuYWdlciA9IG51bGw7XG4gICAgcHVibGljIHN0YXRpYyBnZXQgUmVzKCl7XG4gICAgICAgIGlmKCF0aGlzLl9yZXNNYW5hZ2VyKXtcbiAgICAgICAgICAgIHRoaXMuX3Jlc01hbmFnZXIgPSBuZXcgUmVzTWFuYWdlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNNYW5hZ2VyOyBcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBCYXNlTWFuYWdlciB7XG4gICAgYWJzdHJhY3Qgb25EZXN0cm95KCk6IHZvaWQ7XG59IiwiaW1wb3J0IEJhc2VNYW5hZ2VyIGZyb20gXCIuLi9iYXNlL0Jhc2VNYW5hZ2VyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZHVsZU1hbmFnZXIgZXh0ZW5kcyBCYXNlTWFuYWdlcntcbiAgICBtb2R1bGVUYWJsZSA9IFtdO1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubW9kdWxlVGFibGUgPSB0aGlzLmluaXRNb2R1bGUoKTtcbiAgICB9XG5cbiAgICBpbml0TW9kdWxlKCl7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAvLyBTY2VuZUN0cmwuZ2V0SW5zdGFuY2UoKSxcbiAgICAgICAgICAgIC8vIE1haW5VSUN0cmwuZ2V0SW5zdGFuY2UoKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBvbkRlc3Ryb3koKXtcbiAgICAgICAgZm9yKGxldCBpIGluIHRoaXMubW9kdWxlVGFibGUpe1xuICAgICAgICAgICAgbGV0IG0gPSB0aGlzLm1vZHVsZVRhYmxlW2ldO1xuICAgICAgICAgICAgbS5vZmZUYXJnZXQgJiYgbS5vZmZUYXJnZXQobSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb2R1bGVUYWJsZSA9IFtdO1xuICAgIH1cbn1cbiIsImltcG9ydCBCYXNlTWFuYWdlciBmcm9tIFwiLi4vYmFzZS9CYXNlTWFuYWdlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBc3NldHNNYW5hZ2VyIGV4dGVuZHMgQmFzZU1hbmFnZXIge1xuICAgIHByaXZhdGUgX2Fzc2V0c0xpc3Q6IGFueSA9IHt9O1xuXG4gICAgLyoqIOWKoOi9vemihOWItuS9kyAqL1xuICAgIC8vIGxvYWRQcmVmYWIocGF0aDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMubG9hZEFzc2V0c0FzeW5jKHBhdGgpO1xuICAgIC8vIH1cblxuICAgIC8vIC8qKiDliqDovb3luKflm77niYcgKi9cbiAgICAvLyBsb2FkU3ByaXRlKHBhdGg6IHN0cmluZyk6IFByb21pc2U8Y2MuU3ByaXRlRnJhbWU+IHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMubG9hZEFzc2V0c0FzeW5jKHBhdGgsIGNjLlNwcml0ZUZyYW1lKTtcbiAgICAvLyB9XG5cbiAgICAvLyAvKiog5Yqg6L295Zu+6ZuGICovXG4gICAgLy8gbG9hZFNwcml0ZUF0bGFzKHBhdGg6IHN0cmluZyk6IFByb21pc2U8Y2MuU3ByaXRlQXRsYXM+IHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMubG9hZEFzc2V0c0FzeW5jKHBhdGgsIGNjLlNwcml0ZUF0bGFzKTtcbiAgICAvLyB9XG5cbiAgICAvLyAvKiog5Yqg6L296Z+z6aKRICovXG4gICAgLy8gbG9hZEF1ZGlvQ2xpcChwYXRoOiBzdHJpbmcpOiBQcm9taXNlPGNjLkF1ZGlvQ2xpcD57XG4gICAgLy8gICAgIHJldHVybiB0aGlzLmxvYWRBc3NldHNBc3luYyhwYXRoLCBjYy5BdWRpb0NsaXApO1xuICAgIC8vIH1cblxuICAgIC8vIC8qKiDliqDovb3phY3nva4gKi9cbiAgICAvLyBsb2FkQ29uZmlnKHBhdGg6IHN0cmluZyk6IFByb21pc2U8Y2MuSnNvbkFzc2V0PntcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMubG9hZEFzc2V0c0FzeW5jKHBhdGgsIGNjLkpzb25Bc3NldCk7XG4gICAgLy8gfVxuXG4gICAgLy8gbG9hZEFzc2V0c0FzeW5jKHBhdGg6IHN0cmluZywgdHlwZT86IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24pID0+IHtcbiAgICAvLyAgICAgICAgIGxldCBfc2VsZiA9IHRoaXM7XG4gICAgLy8gICAgICAgICBpZihfc2VsZi5fYXNzZXRzTGlzdFtwYXRoXSl7XG4gICAgLy8gICAgICAgICAgICAgcmVzb2x2ZShfc2VsZi5fYXNzZXRzTGlzdFtwYXRoXSk7XG4gICAgLy8gICAgICAgICB9ZWxzZXtcbiAgICAvLyAgICAgICAgICAgICBMYXlhLmxvYWRlci5sb2FkKHBhdGgsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKGVyciwgcmVzKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfotYTmupDliqDovb0tLS0tPicsIGVyciwgcmVzKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYoZXJyKXtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgICAgIF9zZWxmLl9hc3NldHNMaXN0W3BhdGhdID0gcmVzO1xuICAgIC8vICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgLy8gICAgICAgICAgICAgfSkpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG5cbiAgICByZWxlYXNlUmVzKHJlc1BhdGg6IHN0cmluZyl7XG4gICAgICAgIC8vIGNjLmxvYWRlci5yZWxlYXNlUmVzKHJlc1BhdGgpO1xuICAgICAgICB0aGlzLl9hc3NldHNMaXN0W3Jlc1BhdGhdID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgb25EZXN0cm95KCl7XG4gICAgICAgIC8vIGZvcihsZXQgcGF0aCBpbiB0aGlzLl9hc3NldHNMaXN0KXtcbiAgICAgICAgLy8gICAgIHRoaXMucmVsZWFzZVJlcyhwYXRoKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyB0aGlzLl9hc3NldHNMaXN0ID0ge307XG4gICAgfVxufVxuIiwiaW1wb3J0IEFzc2V0c01hbmFnZXIgZnJvbSBcIi4vQXNzZXRzTWFuYWdlclwiO1xuaW1wb3J0IEJhc2VNYW5hZ2VyIGZyb20gXCIuLi9iYXNlL0Jhc2VNYW5hZ2VyXCI7XG5pbXBvcnQgTWFuYWdlciBmcm9tIFwiLi4vTWFuYWdlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNNYW5hZ2VyIGV4dGVuZHMgQmFzZU1hbmFnZXIge1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLyoqIOiOt+WPlumihOWItuS9kywg5bm255Sf5oiQ5a6e5L6LICovXG4gICAgLy8gZ2V0UHJlZmFiKHBhdGg6IHN0cmluZyk6IFByb21pc2U8TGF5YS5TcHJpdGU+IHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuX2dldFByZWZhYihwYXRoKTtcbiAgICAvLyB9XG5cbiAgICAvLyAvKiog6I635Y+W6Z+z6aKRICovXG4gICAgLy8gZ2V0QXVkaW8ocGF0aDogc3RyaW5nKTogUHJvbWlzZTxjYy5BdWRpb0NsaXA+IHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuX2dldEF1ZGlvKHBhdGgpO1xuICAgIC8vIH1cblxuICAgIC8vIC8qKiDojrflj5ZyZXNvdXJjZXMvdGV4dHVyZXMvZHJhdy/nm67lvZXkuIvnmoTotYTmupAgKi9cbiAgICAvLyBnZXREcmF3KG5hbWU6IHN0cmluZyk6IFByb21pc2U8Y2MuU3ByaXRlRnJhbWU+IHtcbiAgICAvLyAgICAgbGV0IHBhdGggPSBcInRleHR1cmVzL2RyYXcvXCI7XG4gICAgLy8gICAgIGxldCBhdGxhc05hbWUgPSBcIjAtZHJhd1wiOyAvL+ayoeacieWbvumbhuWImeS4uuepulxuICAgIC8vICAgICByZXR1cm4gdGhpcy5fZ2V0U3ByaXRlKHBhdGgsIG5hbWUsIGF0bGFzTmFtZSk7XG4gICAgLy8gfVxuXG4gICAgLy8gLyoqIOiOt+WPlumFjee9riAqL1xuICAgIC8vIGdldE1vbnN0ZXJDb25maWcobmFtZTogc3RyaW5nKTogUHJvbWlzZTxjYy5Kc29uQXNzZXQ+IHtcbiAgICAvLyAgICAgbGV0IHBhdGggPSBcImNvbmZpZy9hdXRvL1wiO1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5fZ2V0Q29uZmlnKHBhdGggKyBuYW1lKTtcbiAgICAvLyB9XG5cbiAgICAvLyAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHByaXZhdGUgX2Fzc2V0TWdyOiBBc3NldHNNYW5hZ2VyID0gTWFuYWdlci5Bc3NldHM7XG5cbiAgICAvLyAvKiog6I635Y+W5Zu+54mH5pWj5Zu+6LWE5rqQ77yM5aaC5p6c6I635Y+W5aSx6LSl77yM5YiZ5LuO5Zu+6ZuG6YeM6I635Y+WICovXG4gICAgLy8gcHJpdmF0ZSBfZ2V0U3ByaXRlKHBhdGg6IHN0cmluZywgbmFtZTogc3RyaW5nLCBhdGxhc05hbWU/OiBzdHJpbmcpOiBQcm9taXNlPGNjLlNwcml0ZUZyYW1lPiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gICAgICAgICAvKiog6I635Y+W5pWj5Zu+ICovXG4gICAgLy8gICAgICAgICB0aGlzLl9hc3NldE1nci5sb2FkU3ByaXRlKHBhdGggKyBuYW1lKS50aGVuKChzcEZyYW1lOiBjYy5TcHJpdGVGcmFtZSkgPT4ge1xuICAgIC8vICAgICAgICAgICAgIHJlc29sdmUoc3BGcmFtZSk7XG4gICAgLy8gICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgLyoqIOayoeaVo+WbvuWImeS7juWbvumbhuiOt+WPliAqL1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuX2dldFNwcml0ZUZyYW1lRnJvbUF0bGFzKHBhdGggKyBhdGxhc05hbWUsIG5hbWUpLnRoZW4oKHNwRnJhbWU6IGNjLlNwcml0ZUZyYW1lKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIHJlc29sdmUoc3BGcmFtZSk7XG4gICAgLy8gICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1Jlc01hbmFnZXIudHNdLS0tLS0+YXNzZXQgaXMgbm90IGV4aXN0OlwiLCBwYXRoICsgbmFtZSwgXCItLS0+YXRsYXMgYXJlIG5vdDpcIiwgYXRsYXNOYW1lKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgLy8gdGhpcy5fYXNzZXRNZ3IucmVsZWFzZVJlcyhwYXRoICsgYXRsYXNOYW1lKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICB9KTtcbiAgICAvLyAgICAgfSk7ICAgXG4gICAgLy8gfVxuXG4gICAgLy8gcHJpdmF0ZSBfZ2V0U3ByaXRlRnJhbWVGcm9tQXRsYXMocGF0aDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPGNjLlNwcml0ZUZyYW1lPiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gICAgICAgICB0aGlzLl9hc3NldE1nci5sb2FkU3ByaXRlQXRsYXMocGF0aCkudGhlbigocmVzOiBjYy5TcHJpdGVBdGxhcykgPT4ge1xuICAgIC8vICAgICAgICAgICAgIGxldCBzcEZyYW1lID0gcmVzLmdldFNwcml0ZUZyYW1lKG5hbWUpO1xuICAgIC8vICAgICAgICAgICAgIGlmKHNwRnJhbWUpe1xuICAgIC8vICAgICAgICAgICAgICAgICByZXNvbHZlKHNwRnJhbWUpO1xuICAgIC8vICAgICAgICAgICAgIH1lbHNle1xuICAgIC8vICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgLy8gICAgICAgICB9KTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgLyoqIOiOt+WPlumihOWItuS9kyAqL1xuICAgIC8vIHByaXZhdGUgX2dldFByZWZhYihwYXRoOiBzdHJpbmcpOiBQcm9taXNlPExheWEuU3ByaXRlPiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gICAgICAgICB0aGlzLl9hc3NldE1nci5sb2FkUHJlZmFiKHBhdGgpLnRoZW4oKHJlcykgPT4ge1xuICAgIC8vICAgICAgICAgICAgIGlmKHJlcyl7XG4gICAgLy8gICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAvLyAgICAgICAgICAgICB9ZWxzZXtcbiAgICAvLyAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgIC8vICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vIH1cblxuICAgIC8vIHByaXZhdGUgX2dldENvbmZpZyhwYXRoOiBzdHJpbmcpOiBQcm9taXNlPGNjLkpzb25Bc3NldD4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vICAgICAgICAgdGhpcy5fYXNzZXRNZ3IubG9hZENvbmZpZyhwYXRoKS50aGVuKChyZXMpID0+IHtcbiAgICAvLyAgICAgICAgICAgICBpZihyZXMpe1xuICAgIC8vICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcy5qc29uKTtcbiAgICAvLyAgICAgICAgICAgICB9ZWxzZXtcbiAgICAvLyAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgIC8vICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vIH1cblxuICAgIC8vIHByaXZhdGUgX2dldEF1ZGlvKHBhdGg6IHN0cmluZyk6IFByb21pc2U8Y2MuQXVkaW9DbGlwPiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gICAgICAgICB0aGlzLl9hc3NldE1nci5sb2FkQXVkaW9DbGlwKHBhdGgpLnRoZW4oKGF1ZGlvOiBjYy5BdWRpb0NsaXApID0+IHtcbiAgICAvLyAgICAgICAgICAgICBpZihhdWRpbyl7XG4gICAgLy8gICAgICAgICAgICAgICAgIHJlc29sdmUoYXVkaW8pO1xuICAgIC8vICAgICAgICAgICAgIH1lbHNle1xuICAgIC8vICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgLy8gICAgICAgICB9KTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgb25EZXN0cm95KCl7XG5cbiAgICB9XG59XG4iLCJpbXBvcnQgQmFzZU1hbmFnZXIgZnJvbSBcIi4uL2Jhc2UvQmFzZU1hbmFnZXJcIjtcbmltcG9ydCBNYW5hZ2VyIGZyb20gXCIuLi9NYW5hZ2VyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvdW5kTWFuYWdlciBleHRlbmRzIEJhc2VNYW5hZ2VyIHtcbiAgICBwcml2YXRlIF9jdXJyZW50OiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX2xvYWRMaXN0OiBPYmplY3QgPSB7fTtcblxuICAgIC8vIHBsYXkocGF0aDogc3RyaW5nLCBsb29wOiBib29sZWFuID0gZmFsc2UsIHZvbHVtZTogbnVtYmVyID0gMSl7XG4gICAgLy8gICAgIE1hbmFnZXIuUmVzLmdldEF1ZGlvKHBhdGgpLnRoZW4oKGF1ZGlvOiBjYy5BdWRpb0NsaXApID0+IHtcbiAgICAvLyAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSBjYy5hdWRpb0VuZ2luZS5wbGF5KGF1ZGlvLCBsb29wLCB2b2x1bWUpO1xuICAgIC8vICAgICAgICAgdGhpcy5fbG9hZExpc3RbcGF0aF0gPSBhdWRpbztcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgLy8gcGF1c2VDdXJyZW50KCl7XG4gICAgLy8gICAgIGNjLmF1ZGlvRW5naW5lLnBhdXNlKHRoaXMuX2N1cnJlbnQpO1xuICAgIC8vIH1cblxuICAgIC8vIHBhdXNlQWxsKCl7XG4gICAgLy8gICAgIGNjLmF1ZGlvRW5naW5lLnBhdXNlQWxsKCk7XG4gICAgLy8gfVxuXG4gICAgLy8gc3RvcEN1cnJlbnQoKXtcbiAgICAvLyAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcCh0aGlzLl9jdXJyZW50KTtcbiAgICAvLyB9XG5cbiAgICAvLyBzdG9wQWxsKCl7XG4gICAgLy8gICAgIGNjLmF1ZGlvRW5naW5lLnN0b3BBbGwoKTtcbiAgICAvLyB9XG5cbiAgICAvLyByZXN1bWVDdXJyZW50KCl7XG4gICAgLy8gICAgIGNjLmF1ZGlvRW5naW5lLnJlc3VtZSh0aGlzLl9jdXJyZW50KTtcbiAgICAvLyB9XG5cbiAgICAvLyByZXN1bWVBbGwoKXtcbiAgICAvLyAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lQWxsKCk7XG4gICAgLy8gfVxuXG4gICAgb25EZXN0cm95KCl7XG4gICAgICAgIHRoaXMuX2xvYWRMaXN0ID0ge307XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTVZDUyB9IGZyb20gXCIuLi8uLi9jb3JlL212Yy9tdmNzXCI7XG5pbXBvcnQgQmFzZU1hbmFnZXIgZnJvbSBcIi4uL2Jhc2UvQmFzZU1hbmFnZXJcIjtcbmltcG9ydCBNYW5hZ2VyIGZyb20gXCIuLi9NYW5hZ2VyXCI7XG5cbmxldCB3ID0gOTYwO1xubGV0IGggPSA2NDA7XG5cbmNsYXNzIHZpZXdFbGVtZW50IHtcbiAgICAvKiog6LWE5rqQ6Lev5b6EICovXG4gICAgcGF0aDogc3RyaW5nO1xuICAgIC8qKiDlsYLnuqcgKi9cbiAgICB6SW5kZXg6IG51bWJlcjtcbiAgICAvKiog5omT5byA5pWI5p6cICovXG4gICAgb3BlbkVmZmVjdDogbnVtYmVyO1xuICAgIC8qKiDlrp7kvosgKi9cbiAgICBpbnN0YW5jZTogTVZDUy5WaWV3XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJTWFuYWdlciBleHRlbmRzIEJhc2VNYW5hZ2VyIHtcbiAgICBwcml2YXRlIF92aWV3czoge1trZXk6IHN0cmluZ106IHZpZXdFbGVtZW50fSA9IHt9O1xuICAgIHByaXZhdGUgX3Jvb3Q6IExheWEuU3ByaXRlID0gbmV3IExheWEuU3ByaXRlKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBMYXlhLnN0YWdlLmFkZENoaWxkKHRoaXMuX3Jvb3QpO1xuICAgICAgICB0aGlzLl9yb290LndpZHRoID0gdztcbiAgICAgICAgdGhpcy5fcm9vdC5oZWlnaHQgPSBoO1xuICAgICAgICB0aGlzLl9yb290LnggPSAwO1xuICAgICAgICB0aGlzLl9yb290LnkgPSAwO1xuICAgIH1cblxuICAgIC8vIG9wZW4ocmVzUGF0aDogc3RyaW5nLCB6SW5kZXg6IG51bWJlciwgb3BlbkVmZmVjdDogbnVtYmVyKTogUHJvbWlzZTxNVkNTLlZpZXc+e1xuICAgIC8vICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAvLyAgICAgICAgIGxldCB2aWV3ID0gdGhpcy5fdmlld3NbcmVzUGF0aF07XG4gICAgLy8gICAgICAgICBpZighdmlldyl7XG4gICAgLy8gICAgICAgICAgICAgdmlldyA9IG5ldyB2aWV3RWxlbWVudCgpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgbGV0IG9wZW5TdWMgPSAodmlld05vZGU6IExheWEuU3ByaXRlKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgdmlld05vZGUuek9yZGVyID0gekluZGV4O1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuX3Jvb3QuYWRkQ2hpbGQodmlld05vZGUpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgaWYoIXZpZXcuaW5zdGFuY2Upe1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVZpZXcocmVzUGF0aCkudGhlbigodmlld09iajogTVZDUy5WaWV3KSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIG9wZW5TdWModmlld09iai5vd25lci5nZXRDb21wb25lbnQoTGF5YS5TcHJpdGUpKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2aWV3T2JqKTtcbiAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgIH1lbHNle1xuICAgIC8vICAgICAgICAgICAgIHZpZXcuaW5zdGFuY2Uub3duZXIuYWN0aXZlID0gdHJ1ZTtcbiAgICAvLyAgICAgICAgICAgICBvcGVuU3VjKHZpZXcuaW5zdGFuY2Uub3duZXIuZ2V0Q29tcG9uZW50KExheWEuU3ByaXRlKSk7XG4gICAgLy8gICAgICAgICAgICAgcmVzb2x2ZSh2aWV3Lmluc3RhbmNlKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgLy8gZ2V0VmlldzxUPihyZXNQYXRoOiBzdHJpbmcpOiBQcm9taXNlPFQ+e1xuICAgIC8vICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAvLyAgICAgICAgIGxldCB2aWV3OiBhbnkgPSB0aGlzLl92aWV3c1tyZXNQYXRoXTtcbiAgICAvLyAgICAgICAgIGlmKCF2aWV3KXtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLl9jcmVhdGVWaWV3KHJlc1BhdGgpLnRoZW4oKHZpZXc6IGFueSkgPT4ge1xuICAgIC8vICAgICAgICAgICAgICAgICByZXNvbHZlKHZpZXcuaW5zdGFuY2UpO1xuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgfWVsc2V7XG4gICAgLy8gICAgICAgICAgICAgcmVzb2x2ZSh2aWV3Lmluc3RhbmNlKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgY2xvc2UocmVzUGF0aDogc3RyaW5nLCBpc0RlbGV0ZTogYm9vbGVhbiA9IGZhbHNlKXtcbiAgICAgICAgbGV0IHZpZXcgPSB0aGlzLl92aWV3c1tyZXNQYXRoXTtcbiAgICAgICAgaWYodmlldyAmJiB2aWV3Lmluc3RhbmNlKXtcbiAgICAgICAgICAgIGlmKGlzRGVsZXRlKXtcbiAgICAgICAgICAgICAgICB2aWV3Lmluc3RhbmNlLm93bmVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLl92aWV3c1tyZXNQYXRoXSA9IG51bGw7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2aWV3Lmluc3RhbmNlLm93bmVyLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gcHJpdmF0ZSBfY3JlYXRlVmlldyhyZXNQYXRoOiBzdHJpbmcpOiBQcm9taXNlPE1WQ1MuVmlldz4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAvLyAgICAgICAgIGxldCB2aWV3ID0gdGhpcy5fdmlld3NbcmVzUGF0aF07XG4gICAgLy8gICAgICAgICBpZighdmlldyl7XG4gICAgLy8gICAgICAgICAgICAgdmlldyA9IG5ldyB2aWV3RWxlbWVudCgpO1xuICAgIC8vICAgICAgICAgICAgIE1hbmFnZXIuUmVzLmdldFByZWZhYihyZXNQYXRoKS50aGVuKCh2aWV3T2JqOiBMYXlhLlNwcml0ZSkgPT4ge1xuICAgIC8vICAgICAgICAgICAgICAgICBsZXQgbmFtZXMgPSByZXNQYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5fcm9vdC5hZGRDaGlsZCh2aWV3T2JqKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgdmlldy5pbnN0YW5jZSA9IHZpZXdPYmouZ2V0Q29tcG9uZW50KG5hbWVzW25hbWVzLmxlbmd0aCAtIDFdKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5fdmlld3NbcmVzUGF0aF0gPSB2aWV3O1xuICAgIC8vICAgICAgICAgICAgICAgICByZXNvbHZlKHZpZXcuaW5zdGFuY2UpO1xuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgfWVsc2V7XG4gICAgLy8gICAgICAgICAgICAgcmVzb2x2ZSh2aWV3Lmluc3RhbmNlKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgb25EZXN0cm95KCl7XG4gICAgICAgIHRoaXMuX3ZpZXdzID0ge307XG4gICAgfVxufVxuIl19
